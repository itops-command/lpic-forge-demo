<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0f172a">
    <link rel="manifest" href="./manifest.json">
    <title>LPIC Forge PRO</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <div class="wrap" id="courseSelect">
      <header class="panel" style="text-align:center">
        <h1 style="margin:0">LPIC Forge</h1>
        <p class="lead">Elige el camino que quieres dominar. Cada curso combina planes de estudio, quizzes y laboratorios prácticos.</p>
      </header>
      <div class="panel" style="margin-top:16px">
        <div class="course-grid">
          <article class="course-card" data-course="data-science">
            <span class="course-tag soon">Próximamente</span>
            <h2>Ciencia de Datos</h2>
            <p>Aprende Python, estadística aplicada y machine learning con retos guiados.</p>
            <button class="btn ghost" type="button" data-course-select="data-science" disabled>Explorar</button>
          </article>
          <article class="course-card" data-course="linux">
            <span class="course-tag live">Disponible</span>
            <h2>Linux</h2>
            <p>Prepárate para certificaciones como LPIC-1 con planes diarios y simuladores realistas.</p>
            <button class="btn" type="button" data-course-select="linux">Ingresar</button>
          </article>
          <article class="course-card" data-course="datafactory">
            <span class="course-tag soon">Próximamente</span>
            <h2>Datafactory</h2>
            <p>Orquesta pipelines modernos de datos y automatiza despliegues con buenas prácticas.</p>
            <button class="btn ghost" type="button" data-course-select="datafactory" disabled>Explorar</button>
          </article>
          <article class="course-card" data-course="azure">
            <span class="course-tag soon">Próximamente</span>
            <h2>Azure</h2>
            <p>Domina los servicios clave de Azure para arquitecturas en la nube y certificaciones.</p>
            <button class="btn ghost" type="button" data-course-select="azure" disabled>Explorar</button>
          </article>
        </div>
      </div>
    </div>

    <div class="wrap" id="appWrap" hidden>
      <header class="panel">
        <div class="row" style="justify-content:space-between;align-items:center">
          <h1 style="margin:0">LPIC Forge PRO</h1>
          <div class="row" style="align-items:center;gap:10px">
            <span class="badge" id="courseTag">Selecciona un curso para comenzar</span>
            <button id="changeCourse" class="btn ghost" style="padding:8px 12px">Cambiar curso</button>
          </div>
        </div>
        <div class="tabbar" style="margin-top:12px">
            <div class="tab active" data-id="plan">Plan</div>
            <div class="tab" data-id="repasoView" id="btnRepasoInteractivo">Repaso Interactivo</div>
            <div class="tab" data-id="quiz">Quiz</div>
            <div class="tab" data-id="exam">Simulador</div>
            <div class="tab" data-id="labs">Labs</div>
            <div class="tab" data-id="dash">Dashboard</div>
        </div>
        <div class="row" style="margin-top:8px">
          <div class="panel" style="padding:6px 10px"><b>Racha:</b> <span id="streak">0</span> días</div>
          <div class="panel" style="padding:6px 10px"><b>Hoy:</b> <span id="today">0</span> min</div>
          <div class="panel" style="padding:6px 10px"><b>Meta:</b> <span id="goal">75</span> min</div>
          <div class="panel" style="padding:6px 10px"><b>XP:</b> <span id="xp">0</span></div>
        </div>
      </header>

      <div class="hr"></div>

      <!-- PLAN -->
      <section id="plan" class="view" style="display:block">
        <div class="panel">
          <h2>Plan de 60 días</h2>
          <p>Recomendación: <b>75–90 min</b> por día. Guarda tu perfil y meta; todo se mide y queda en tu celular.</p>
          <div class="row">
            <label>Min/día:&nbsp;</label>
            <input id="goalInput" type="number" class="input" value="75" style="max-width:120px">
            <button id="saveGoal" class="btn">Guardar</button>
            <span class="small">Correo/alias:&nbsp;</span>
            <input id="emailInput" class="input" placeholder="tu@correo o alias" style="max-width:240px">
            <button id="saveEmail" class="btn ghost">Guardar perfil</button>
            <button id="resetAll" class="btn" style="background:#6b2c2c;border-color:#8a3b3b">Restablecer progreso</button>
          </div>
          <div class="hr"></div>
          <div class="row">
            <button id="startTimer" class="btn">Iniciar temporizador</button>
            <button id="pauseTimer" class="btn ghost">Pausar</button>
            <div class="panel">⏱ <span id="timer">00:00</span></div>
          </div>
          <div class="hr"></div>
          <ol>
            <li><b>Días 1–14:</b> 101.1–101.3 (arquitectura/arranque).</li>
            <li><b>Días 15–35:</b> 102.1–102.6 (FHS/LVM/paquetería/libs/virtualización).</li>
            <li><b>Días 36–54:</b> Mezcla + reforzar débiles. Simulacro 3× por semana.</li>
            <li><b>Días 55–60:</b> Repaso final y simulacros completos.</li>
          </ol>
        </div>
      </section>

      <!-- REPASO INTERACTIVO -->
      <section id="repasoView" class="view" style="display:none">
        <div class="panel">
          <h2>Repaso Interactivo</h2>
          <div class="row">
            <select id="repasoFilter" class="input" style="max-width:200px"></select>
            <div class="row" style="flex:1;align-items:center;gap:10px">
              <div class="progress" style="flex:1"><div id="repasoProgBar"></div></div>
              <div class="small" id="repasoProgText">0/0 (0%)</div>
            </div>
          </div>
          <div id="repasoCard" style="margin-top:10px"></div>
        </div>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="view" style="display:none">
        <div class="panel">
          <h2>Quiz mixto</h2>
          <div class="row">
            <select id="topicSel" class="input" style="max-width:200px">
              <option value="all">Todos</option>
              <option>101.1</option><option>101.2</option><option>101.3</option>
              <option>102.1</option><option>102.2</option><option>102.3</option><option>102.4</option><option>102.5</option><option>102.6</option>
            </select>
            <select id="diffSel" class="input" style="max-width:160px">
              <option value="all">Todas</option><option value="E">Fácil</option><option value="M">Media</option><option value="H">Difícil</option>
            </select>
            <label class="small" style="display:flex;align-items:center;gap:6px">
              <input type="checkbox" id="deferChk" checked>
              Feedback diferido (ver al presionar Siguiente)
            </label>
            <button id="startQuiz" class="btn">Empezar</button>
            <button id="startLesson10" class="btn ghost">Lección (10)</button>
          </div>
          <div id="quizPanel" style="margin-top:10px"></div>
        </div>
      </section>

      <!-- SIMULADOR -->
      <section id="exam" class="view" style="display:none">
        <div class="panel">
          <h2>Simulador de examen LPIC-1</h2>
          <div class="row">
            <label>Preguntas:&nbsp;</label>
            <select id="examCount" class="input" style="max-width:120px">
              <option>10</option><option>30</option><option selected>60</option>
            </select>
            <label>Tiempo:&nbsp;</label>
            <select id="examTime" class="input" style="max-width:120px">
              <option value="30">30 min</option><option value="60">60 min</option><option value="90" selected>90 min</option>
            </select>
            <button id="startExam" class="btn">Iniciar simulacro</button>
            <div class="panel">⏱ <span id="examTimer">--:--:--</span></div>
          </div>
          <div class="small">* No podrás volver atrás. El feedback aparece al finalizar.</div>
          <div id="examPanel" style="margin-top:10px"></div>
        </div>
      </section>

      <!-- LABS -->
      <section id="labs" class="view" style="display:none">
        <div class="panel">
          <h2>Laboratorios interactivos</h2>
          <div class="row">
            <select id="labSel" class="input" style="max-width:320px"></select>
            <button id="startLab" class="btn">Iniciar</button>
          </div>
          <div id="labPanel" style="margin-top:10px"></div>
        </div>
      </section>

      <!-- DASHBOARD -->
      <section id="dash" class="view" style="display:none">
        <div class="panel">
          <h2>Dashboard de debilidades</h2>
          <canvas id="chartTopics" width="960" height="360" style="max-width:100%"></canvas>
          <div class="hr"></div>
          <div id="dashList"></div>
        </div>
      </section>

      <div class="footer small">PWA offline • simulador real • labs con validación • análisis por tema</div>
    </div>

    <script src="./app.js"></script>
    <script>if('serviceWorker' in navigator){ navigator.serviceWorker.register('./sw.js'); }</script>
  </body>
</html>
